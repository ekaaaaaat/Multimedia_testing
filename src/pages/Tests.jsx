import { useState } from 'react'
import { useTheme } from '../contexts/ThemeContext'
import InteractiveTest from '../components/InteractiveTest'
import './Tests.css'

const allTests = [
  {
    id: 1,
    title: '–¢–µ—Å—Ç: –û—Å–Ω–æ–≤—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è',
    description: '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–Ω—è—Ç–∏–π –∏ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è.',
    questions: [
      {
        id: 1,
        question: '–ß—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–µ–ª—å—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è?',
        options: [
          '–ù–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞',
          '–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥–µ—Ñ–µ–∫—Ç–æ–≤',
          '–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã',
          '–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ'
        ],
        correct: 1
      },
      {
        id: 2,
        question: '–ö–∞–∫–∏–µ –≤–∏–¥—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—Ç?',
        options: [
          '–¢–æ–ª—å–∫–æ —Ä—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
          '–†—É—á–Ω–æ–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ',
          '–¢–æ–ª—å–∫–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ',
          '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –Ω—É–∂–Ω–æ'
        ],
        correct: 1
      },
      {
        id: 3,
        question: '–ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–µ—Å—Ç-–∫–µ–π—Å?',
        options: [
          '–î–æ–∫—É–º–µ–Ω—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞',
          '–ù–∞–±–æ—Ä —É—Å–ª–æ–≤–∏–π –∏ —à–∞–≥–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏',
          '–°–ø–∏—Å–æ–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –±–∞–≥–æ–≤',
          '–ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏'
        ],
        correct: 1
      }
    ]
  },
  {
    id: 2,
    title: '–¢–µ—Å—Ç: –£—Ä–æ–≤–Ω–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è',
    description: '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π.',
    questions: [
      {
        id: 1,
        question: '–ö–∞–∫–æ–π —É—Ä–æ–≤–µ–Ω—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –∫–æ–¥–∞?',
        options: [
          '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
          '–ú–æ–¥—É–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
          '–°–∏—Å—Ç–µ–º–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
          '–ü—Ä–∏–µ–º–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ'
        ],
        correct: 1
      },
      {
        id: 2,
        question: '–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ?',
        options: [
          '–û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏',
          '–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–æ–¥—É–ª–µ–π',
          '–°–∏—Å—Ç–µ–º—É –≤ —Ü–µ–ª–æ–º',
          '–¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å'
        ],
        correct: 2
      }
    ]
  }
]

const Tests = () => {
  const { theme } = useTheme()
  const [selectedTest, setSelectedTest] = useState(null)

  if (selectedTest) {
    const test = allTests.find(t => t.id === selectedTest)
    return (
      <div className={`tests-page ${theme}`}>
        <button onClick={() => setSelectedTest(null)} className="back-button">
          ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É —Ç–µ—Å—Ç–æ–≤
        </button>
        <div className="test-container">
          <h1>{test.title}</h1>
          <p className="test-description">{test.description}</p>
          <InteractiveTest questions={test.questions} />
        </div>
      </div>
    )
  }

  return (
    <div className={`tests-page ${theme}`}>
      <section className="tests-header">
        <h1>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã</h1>
        <p className="tests-intro">
          –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤. 
          –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–æ–ø—Ä–æ—Å—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤. –ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ 
          –ø–æ–¥—Ä–æ–±–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –∏ —Å–º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã.
        </p>
      </section>

      <div className="tests-grid">
        {allTests.map(test => (
          <div key={test.id} className="test-card">
            <h2>{test.title}</h2>
            <p className="test-card-description">{test.description}</p>
            <div className="test-info">
              <span>üìù {test.questions.length} –≤–æ–ø—Ä–æ—Å–æ–≤</span>
            </div>
            <button 
              onClick={() => setSelectedTest(test.id)}
              className="start-test-btn"
            >
              –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç ‚Üí
            </button>
          </div>
        ))}
      </div>
    </div>
  )
}

export default Tests

